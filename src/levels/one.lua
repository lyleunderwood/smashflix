return {
  behavior = {
    waves = {
      {
        { time = 1, N = {"Ninja"} }
      },
      {
        { time = 1, N = {"Bum"}, E = {"Ninja"} },
        { time = 2, N = {"Bum"} },
        { time = 3, N = {"Bum"} },
        { time = 4, N = {"Bum"} },
        { time = 5, N = {"Bum"} },
        { time = 6, N = {"Bum"} },
        { time = 7, N = {"Bum"} },
        { time = 8, N = {"Bum"} },
        { time = 9, N = {"Bum"} },
        { time = 10, S = {"Bum"} },
        { time = 11, N = {"Bum"} },
        { time = 12, S = {"Bum"} },
        { time = 13, N = {"Bum"} },
        { time = 14, S = {"Bum"} },
        { time = 16, N = {"Bum"} },
        { time = 17, S = {"Bum"} },
        { time = 17, N = {"Bum"} },
        { time = 18, S = {"Bum"} },
        { time = 19, N = {"Bum"} },
        { time = 20, S = {"Bum"} },
        { time = 21, N = {"Bum"} },
        { time = 22, E = {"Bum"} },
        { time = 23, S = {"Bum"} },
        { time = 24, W = {"Bum"} },
        { time = 25, N = {"Bum"} },
        { time = 26, E = {"Bum"} },
        { time = 27, S = {"Bum"} },
        { time = 28, W = {"Bum"} },
        { time = 29, N = {"Bum"} },
        { time = 30, S = {"Bum"} },
      },
      {
        { time = 1, E = {"Bum"}, W = {"Bum"} },
        { time = 2.75, E = {"Bum"}, W = {"Bum"} },
        { time = 4.5, E = {"Bum"}, W = {"Bum"} },
        { time = 6.25, E = {"Bum"}, W = {"Bum"} },
        { time = 8, E = {"Bum"}, W = {"Bum"} },
        { time = 9.75, E = {"Bum"}, W = {"Bum"} },
        { time = 11.5, E = {"Bum"}, W = {"Bum"} },
        { time = 13.25, E = {"Bum"}, W = {"Bum"} },
        { time = 15, E = {"Bum"}, W = {"Bum"} },
        { time = 16.75, S = {"Bum"}, N = {"Bum"} },
        { time = 18.5, S = {"Bum"}, N = {"Bum"} },
        { time = 20.25, S = {"Bum"}, N = {"Bum"} },
        { time = 22, S = {"Bum"}, N = {"Bum"} },
        { time = 23.75, S = {"Bum"}, N = {"Bum"} },
        { time = 25.5, S = {"Bum"}, N = {"Bum"} },
        { time = 27.25, S = {"Bum"}, N = {"Bum"} },
        { time = 29, S = {"Bum"}, N = {"Bum"} },
        { time = 30.75, S = {"Bum"}, N = {"Bum"} },
        { time = 32.5, S = {"Bum"}, N = {"Bum"} },
        { time = 34.25, S = {"Bum"}, N = {"Bum"} },
        { time = 36, N = {"Bum"}, S = {"Bum"} },
        { time = 37.75, E = {"Bum"}, W = {"Bum"} },
        { time = 39.5, N = {"Bum"}, S = {"Bum"} },
        { time = 41.25, E = {"Bum"}, W = {"Bum"} },
        { time = 43, N = {"Bum"}, S = {"Bum"} },
        { time = 44.75, E = {"Bum"}, W = {"Bum"} },
        { time = 46.5, N = {"Bum"}, S = {"Bum"} },
        { time = 48.25, E = {"Bum"}, W = {"Bum"} },
        { time = 50, N = {"Bum"}, S = {"Bum"} },
        { time = 51.75, E = {"Bum"}, W = {"Bum"} },
      },
      {
        { time = 1, E = {"Bum"}, W = {"Bum"}, N = {"Bum"} },
        { time = 3.5, E = {"Bum"}, W = {"Bum"}, S = {"Bum"} },
        { time = 6, E = {"Bum"}, W = {"Bum"}, N = {"Bum"} },
        { time = 8.5, E = {"Bum"}, W = {"Bum"}, S = {"Bum"} },
        { time = 11, E = {"Bum"}, W = {"Bum"}, N = {"Bum"} },
        { time = 13.5, E = {"Bum"}, W = {"Bum"}, S = {"Bum"} },
        { time = 16, E = {"Bum"}, W = {"Bum"}, N = {"Bum"} },
        { time = 18.5, E = {"Bum"}, W = {"Bum"}, S = {"Bum"} },
        { time = 21, E = {"Bum"}, W = {"Bum"}, N = {"Bum"} },
        { time = 23.5, E = {"Bum"}, W = {"Bum"}, S = {"Bum"} },
        { time = 26, N = {"Bum"}, S = {"Bum"}, E = {"Bum"} },
        { time = 28.5, S = {"Bum"}, N = {"Bum"}, W = {"Bum"} },
        { time = 31, N = {"Bum"}, S = {"Bum"}, E = {"Bum"} },
        { time = 33.5, S = {"Bum"}, N = {"Bum"}, W = {"Bum"} },
        { time = 37, N = {"Bum"}, S = {"Bum"}, E = {"Bum"} },
        { time = 39.5, S = {"Bum"}, N = {"Bum"}, W = {"Bum"} },
        { time = 32, N = {"Bum"}, S = {"Bum"}, E = {"Bum"} },
        { time = 34.5, S = {"Bum"}, N = {"Bum"}, W = {"Bum"} },
        { time = 37, N = {"Bum"}, S = {"Bum"}, E = {"Bum"} },
        { time = 39.5, S = {"Bum"}, N = {"Bum"}, W = {"Bum"} },
        { time = 42, N = {"Bum"}, S = {"Bum"}, E = {"Bum"}, W = {"Bum"} },
        { time = 44.5, N = {"Bum"}, S = {"Bum"}, E = {"Bum"}, W = {"Bum"} },
        { time = 47, N = {"Bum"}, S = {"Bum"}, E = {"Bum"}, W = {"Bum"} },
        { time = 49.5, N = {"Bum"}, S = {"Bum"}, E = {"Bum"}, W = {"Bum"} },
        { time = 52, N = {"Bum"}, S = {"Bum"}, E = {"Bum"}, W = {"Bum"} },
        { time = 54.5, N = {"Bum"}, S = {"Bum"}, E = {"Bum"}, W = {"Bum"} },
        { time = 57, N = {"Bum"}, S = {"Bum"}, E = {"Bum"}, W = {"Bum"} },
        { time = 59.5, N = {"Bum"}, S = {"Bum"}, E = {"Bum"}, W = {"Bum"} },
        { time = 62, N = {"Bum"}, S = {"Bum"}, E = {"Bum"}, W = {"Bum"} },
        { time = 64.5, N = {"Bum"}, S = {"Bum"}, E = {"Bum"}, W = {"Bum"} },
      },
    },

    start = function(self, level)
      self.level = level

      self.currentWave = 1
      self.currentWaveDone = false

      self.totalWaves = #self.waves

      self.waveEndTimer = MOAITimer:new()
      self.waveEndTimer:setSpan(1)
      self.waveEndTimer:setMode(MOAITimer.LOOP)
      self.waveEndTimer:setListener(MOAITimer.EVENT_TIMER_BEGIN_SPAN, function()
        if self:waveIsClear() then
          if self.currentWave == self.totalWaves then
            self:success()
          else
            self:nextWave()
          end
        end
      end)

      level:loadPc()

      self:startWave()
      self.waveEndTimer:start()
    end,

    stop = function(self)
      self.waveEndTimer:stop()
      if self.waveTimer then
        self.waveTimer:stop()
      end
      if self.eventTimer then
        self.eventTimer:stop()
      end
    end,

    startWave = function(self)
      self.waveTimer = MOAITimer:new()
      self.currentWaveDone = false

      self.previousEventTime = 0
      self.currentEvent = 1
      self.currentWaveObj = self.waves[self.currentWave]

      self:runEvent()
    end,

    runEvent = function(self)
      local event = self.currentWaveObj[self.currentEvent]
      local span = event.time - self.previousEventTime
      print(span)

      self.previousEventTime = event.time

      local cb = function()
        self:spawnEnemiesForEvent(event)
        if self.currentEvent == #self.currentWaveObj then
          self:stopWave()
        else
          self.currentEvent = self.currentEvent + 1
          self:runEvent()
        end
      end

      if span == 0 then
        cb()
      else
        self.eventTimer = MOAITimer:new()
        self.eventTimer:setSpan(span)
        self.eventTimer:setListener(MOAITimer.EVENT_TIMER_END_SPAN, cb)

        self.eventTimer:start()
      end
    end,

    stopWave = function(self)
      self.currentWaveDone = true
    end,

    nextWave = function(self)
      self.currentWave = self.currentWave + 1
      self:startWave()
    end,

    success = function(self)
      self.waveEndTimer:stop()
      self.level:success({
        nextLevel = "two"
      })
    end,

    spawnEnemiesForEvent = function(self, event)
      if event.N then
        for k,v in pairs(event.N) do
          self.level:buildEnemy("actors/"..v, function(rig)
            rig.pos = {x = 0, y = 200}
          end)
        end
      end
      if event.W then
        for k,v in pairs(event.W) do
          self.level:buildEnemy("actors/"..v, function(rig)
            rig.pos = {x = -280, y = 0}
          end)
        end
      end
      if event.E then
        for k,v in pairs(event.E) do
          self.level:buildEnemy("actors/"..v, function(rig)
            rig.pos = {x = 280, y = 0}
          end)
        end
      end
      if event.S then
        for k,v in pairs(event.S) do
          self.level:buildEnemy("actors/"..v, function(rig)
            rig.pos = {x = 0, y = -180}
          end)
        end
      end
    end,

    waveIsClear = function(self)
      return self.currentWaveDone and #self.level.enemies == 0
    end
  },
  backgroundFilename = "images/Paddys.png",
    objects = {
      {
        bb = {-300, 280, -350, -280}
      },
      {
        bb = {300, 280, 350, -280}
      },
      {
        bb = {300, 200, -300, 230}
      },
      {
        bb = {300, -230, -300, -250}
      },
      {
        bb = {-270, 165, -70, 100}
      },
      {
        bb = {250, -175, 90, -85}
      }
    }
}
